(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{891:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>r});var a=t(5155),n=t(2115),l=t(9671),s=t(5465),c=t(4179),i=t.n(c);let d={team:l.T.REZERWY.id,opponent:"",competition:"",date:new Date().toISOString().split("T")[0],isHome:!0},r=e=>{let{isOpen:o,onClose:t,onSave:l,currentInfo:c}=e;console.log("MatchInfoModal otwarty, currentInfo:",c);let[r,u]=(0,n.useState)(c||d);(0,n.useEffect)(()=>{console.log("MatchInfoModal useEffect, currentInfo:",c),u(c||d)},[c,o]);let m=e=>{let{name:o,value:t,type:a}=e.target;if("checkbox"===a){let t=e.target;u(e=>({...e,[o]:t.checked}))}else u(e=>({...e,[o]:t}))};return o?(0,a.jsx)("div",{className:i().modal,children:(0,a.jsxs)("div",{className:i().modalContent,children:[(0,a.jsx)("h2",{children:c?"Edytuj mecz":"Dodaj nowy mecz"}),(0,a.jsxs)("form",{onSubmit:e=>{var o,a;e.preventDefault();let n={...r};(null==c?void 0:c.matchId)&&(n.matchId=c.matchId),console.log("MatchInfoModal handleSubmit - rozpoczęcie zapisu"),console.log("MatchInfoModal handleSubmit - dane formularza przed zapisem:",r),console.log("MatchInfoModal handleSubmit - wybrany zesp\xf3ł:",r.team),"time"in n&&delete n.time,console.log("MatchInfoModal handleSubmit - dane do zapisania:",n);let s=n.team;try{null===(o=document.querySelector('button[type="submit"]'))||void 0===o||o.setAttribute("disabled","true");let e=document.querySelector(".".concat(i().modalContent));e&&e.classList.add(i().savingInProgress),l(n),console.log("MatchInfoModal - wysłano dane do zapisu, zamykam modal..."),t(),console.log("\uD83D\uDD04 Ustawiam hash URL dla zespołu:",s),window.location.hash="refresh=".concat(s)}catch(e){console.error("Błąd podczas zapisywania meczu:",e),alert("Wystąpił błąd podczas zapisywania meczu. Spr\xf3buj ponownie."),null===(a=document.querySelector('button[type="submit"]'))||void 0===a||a.removeAttribute("disabled")}},children:[(0,a.jsxs)("div",{className:i().formGroup,children:[(0,a.jsx)("label",{htmlFor:"team",children:"Zesp\xf3ł:"}),(0,a.jsx)(s.A,{selectedTeam:r.team,onChange:e=>u(o=>({...o,team:e}))})]}),(0,a.jsxs)("div",{className:i().formGroup,children:[(0,a.jsx)("label",{htmlFor:"opponent",children:"Przeciwnik:"}),(0,a.jsx)("input",{id:"opponent",name:"opponent",type:"text",value:r.opponent,onChange:m,required:!0})]}),(0,a.jsxs)("div",{className:i().formGroup,children:[(0,a.jsx)("label",{htmlFor:"competition",children:"Rozgrywki:"}),(0,a.jsx)("input",{id:"competition",name:"competition",type:"text",value:r.competition,onChange:m,required:!0})]}),(0,a.jsxs)("div",{className:i().formGroup,children:[(0,a.jsx)("label",{htmlFor:"date",children:"Data:"}),(0,a.jsx)("input",{id:"date",name:"date",type:"date",value:r.date,onChange:m,required:!0})]}),(0,a.jsx)("div",{className:i().formGroup,children:(0,a.jsxs)("label",{className:"".concat(i().checkboxLabel," ").concat(r.isHome?i().active:""),children:[(0,a.jsx)("input",{type:"checkbox",name:"isHome",checked:r.isHome,onChange:()=>u({...r,isHome:!r.isHome})}),(0,a.jsx)("span",{children:"Mecz u siebie"})]})}),(0,a.jsxs)("div",{className:i().buttonGroup,children:[(0,a.jsx)("button",{type:"button",className:i().cancelButton,onClick:t,children:"Anuluj"}),(0,a.jsx)("button",{type:"submit",className:i().saveButton,children:"Zapisz"})]})]})]})}):null}},4179:e=>{e.exports={modal:"MatchInfoModal_modal__lbVfP",modalContent:"MatchInfoModal_modalContent__vfIJM",formGroup:"MatchInfoModal_formGroup__yqsk_",buttonGroup:"MatchInfoModal_buttonGroup__NEHnn",saveButton:"MatchInfoModal_saveButton__KTLs8",cancelButton:"MatchInfoModal_cancelButton__99Hi0",checkboxLabel:"MatchInfoModal_checkboxLabel__MHSR_",active:"MatchInfoModal_active__6pCoU",savingInProgress:"MatchInfoModal_savingInProgress__gPKPB",pulse:"MatchInfoModal_pulse__h2Fui"}},5465:(e,o,t)=>{"use strict";t.d(o,{A:()=>d});var a=t(5155),n=t(2115),l=t(9671),s=t(76),c=t(6237),i=t.n(c);let d=e=>{let{selectedTeam:o,onChange:t,className:c=""}=e,[d,r]=(0,n.useState)(l.T),[u,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{m(!0);try{let e=await (0,s.jS)();r(e)}catch(e){console.error("Błąd podczas ładowania zespoł\xf3w:",e)}finally{m(!1)}})()},[]),(0,a.jsx)("select",{value:o,onChange:e=>t(e.target.value),className:"".concat(i().teamsSelector," ").concat(c," ").concat(u?i().loading:""),disabled:u,children:Object.values(d).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})}},6237:e=>{e.exports={teamsSelector:"TeamsSelector_teamsSelector__kIxmH",loading:"TeamsSelector_loading__WvPpk"}}}]);