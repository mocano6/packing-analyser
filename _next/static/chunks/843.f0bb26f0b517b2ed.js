"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{76:(e,a,i)=>{i.d(a,{T3:()=>l,jS:()=>t});var o=i(5317),n=i(6104);let c={REZERWY:{id:"89039437-62a7-4eda-b67d-70a4fb24e4ea",name:"Rezerwy"},U19:{id:"1595da8a-a9d6-463d-a49d-5e2c41ff36be",name:"U19"},U17:{id:"58f3862c-75d5-4fa7-a18d-0c8e3b00402a",name:"U17"},U16:{id:"06141fa4-80bc-404e-8fcb-63ef2d0a7815",name:"U16"},U15:{id:"0ebf0d57-4f2c-4c12-937f-635feb2af332",name:"U15"}},s=null,r=0;async function t(){let e=Date.now();if(s&&e-r<36e5)return console.log("Używam zapisanych w pamięci danych o zespołach"),s;try{console.log("Pobieranie zespoł\xf3w z Firebase...");let a=(0,o.rJ)(n.db,"teams"),i=await (0,o.GG)(a);if(i.empty)return console.warn("Brak zespoł\xf3w w Firebase, używam domyślnych danych"),c;let t={};return i.forEach(e=>{var a;let i=e.data();t[(null===(a=Object.entries(c).find(e=>{let[a,o]=e;return o.id===i.id}))||void 0===a?void 0:a[0])||i.id]={id:i.id,name:i.name}}),s=t,r=e,console.log("Pobrano zespoły z Firebase:",Object.keys(t).length),t}catch(e){return console.error("Błąd podczas pobierania zespoł\xf3w z Firebase:",e),console.warn("Używam domyślnych danych o zespołach"),c}}let l=c},843:(e,a,i)=>{i.r(a),i.d(a,{default:()=>d});var o=i(5155),n=i(2115),c=i(9289),s=i(6104),r=i(5317);let t=async()=>{let e="permission_test_".concat(Date.now());try{console.log("Sprawdzanie uprawnień Firestore z użyciem testowego dokumentu ".concat(e,"..."));let a=await (0,r.gS)((0,r.rJ)(s.db,"permission_tests"),{timestamp:new Date,testId:e});return console.log("✅ Dodanie dokumentu powiodło się: ".concat(a.id)),await (0,r.kd)(a),console.log("✅ Usunięcie dokumentu powiodło się"),{canWrite:!0}}catch(a){console.error("❌ Test uprawnień nie powi\xf3dł się:",a);let e="Nieznany błąd";return a instanceof Error&&(e=a.message,"code"in a&&("permission-denied"===a.code?e="Brak uprawnień do zapisu. Sprawdź reguły bezpieczeństwa w Firebase.":"unauthenticated"===a.code?e="Użytkownik niezalogowany. Zaloguj się, aby uzyskać uprawnienia.":"unavailable"===a.code&&(e="Usługa Firebase jest niedostępna. Sprawdź połączenie z internetem."))),{canWrite:!1,error:e}}};var l=i(9671);let d=()=>{let[e,a]=(0,n.useState)(""),[i,s]=(0,n.useState)(!1),[r,d]=(0,n.useState)(null),[p,w]=(0,n.useState)(null),[j,u]=(0,n.useState)(null),[z,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{y(),k()},[]);let k=async()=>{s(!0),a("Sprawdzanie uprawnień do zapisu w Firebase...");try{let e=await t();u(e.canWrite),m(e.error||null),a(e.canWrite?"✅ Masz uprawnienia do zapisu w Firebase":"❌ Brak uprawnień do zapisu: ".concat(e.error))}catch(e){a("❌ Błąd podczas sprawdzania uprawnień: ".concat(e instanceof Error?e.message:String(e))),u(!1)}finally{s(!1)}},y=async()=>{s(!0),a("Sprawdzanie kolekcji teams...");try{let e=await (0,c.Po)();d(e),w(new Date),a(e?"✅ Kolekcja teams istnieje w Firebase - wszystkie dokumenty znalezione":"❌ Kolekcja teams nie istnieje lub jest niekompletna")}catch(e){a("Błąd podczas sprawdzania kolekcji: ".concat(e instanceof Error?e.message:String(e)))}finally{s(!1)}},b=async()=>{if(null===j){if(await k(),!j){a("❌ Nie można zainicjalizować zespoł\xf3w: brak uprawnień do zapisu. ".concat(z));return}}else if(!1===j){a("❌ Nie można zainicjalizować zespoł\xf3w: brak uprawnień do zapisu. ".concat(z));return}if(window.confirm("Czy na pewno chcesz zainicjalizować kolekcję teams? Ta operacja powinna być wykonana tylko raz.")){s(!0),a("Inicjalizacja kolekcji teams...");try{let e=await (0,c.TA)(),i=await (0,c.Po)();d(i),w(new Date),a(e?"✅ Pomyślnie zainicjalizowano kolekcję teams":"ℹ️ Kolekcja teams już istnieje, inicjalizacja pominięta")}catch(e){a("❌ Błąd podczas inicjalizacji: ".concat(e instanceof Error?e.message:String(e)))}finally{s(!1)}}},g=async()=>{if(null===j){if(await k(),!j){a("❌ Nie można zainicjalizować zespoł\xf3w: brak uprawnień do zapisu. ".concat(z));return}}else if(!1===j){a("❌ Nie można zainicjalizować zespoł\xf3w: brak uprawnień do zapisu. ".concat(z));return}if(window.confirm("⚠️ UWAGA: Czy na pewno chcesz WYMUSIĆ inicjalizację kolekcji teams? Ta operacja nadpisze istniejące dane jeśli istnieją!")&&window.confirm("⚠️ Upewnij się, że rozumiesz konsekwencje. Ta operacja aktualizuje wszystkie zespoły, nawet jeśli już istnieją. Kontynuować?")){s(!0),a("Wymuszanie inicjalizacji kolekcji teams...");try{let e=await (0,c.sb)(),i=await (0,c.Po)();d(i),w(new Date),a(e?"✅ Pomyślnie wymuszono inicjalizację kolekcji teams":"❌ Wymuszona inicjalizacja nie powiodła się w pełni - sprawdź konsolę")}catch(e){a("❌ Błąd podczas wymuszonej inicjalizacji: ".concat(e instanceof Error?e.message:String(e)))}finally{s(!1)}}};return(0,o.jsxs)("div",{style:{border:"1px solid #ccc",borderRadius:"5px",padding:"15px",margin:"15px 0",backgroundColor:"#f9f9f9"},children:[(0,o.jsx)("h3",{children:"Inicjalizacja kolekcji Teams"}),(0,o.jsx)("p",{children:'Ta funkcja służy do jednorazowego utworzenia stałej kolekcji "teams" w Firebase. Każdy zesp\xf3ł będzie miał ten sam identyfikator dla wszystkich użytkownik\xf3w.'}),null!==j&&(0,o.jsx)("div",{style:{padding:"10px",backgroundColor:j?"#d4edda":"#f8d7da",borderRadius:"4px",marginBottom:"15px",color:j?"#155724":"#721c24"},children:j?"✅ Masz uprawnienia do zapisu w Firebase":"❌ Brak uprawnień do zapisu w Firebase: ".concat(z)}),(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("h4",{children:"Lista zespoł\xf3w do inicjalizacji:"}),(0,o.jsx)("ul",{children:Object.values(l.T).map(e=>(0,o.jsxs)("li",{children:[e.name," (ID: ",e.id,")"]},e.id))})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",flexWrap:"wrap"},children:[(0,o.jsx)("button",{onClick:y,disabled:i,style:{padding:"8px 12px",backgroundColor:"#4a90e2",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer"},children:"Sprawdź stan kolekcji"}),(0,o.jsx)("button",{onClick:k,disabled:i,style:{padding:"8px 12px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:i?"not-allowed":"pointer"},children:"Sprawdź uprawnienia"}),(0,o.jsx)("button",{onClick:b,disabled:i||!1===j,style:{padding:"8px 12px",backgroundColor:"#5cb85c",color:"white",border:"none",borderRadius:"4px",cursor:i||!1===j?"not-allowed":"pointer",opacity:!1===j?.6:1},children:"Inicjalizuj kolekcję teams"}),(0,o.jsx)("button",{onClick:g,disabled:i||!1===j,style:{padding:"8px 12px",backgroundColor:"#e24a4a",color:"white",border:"none",borderRadius:"4px",cursor:i||!1===j?"not-allowed":"pointer",opacity:!1===j?.6:1},children:"WYMUŚ inicjalizację kolekcji"})]}),e&&(0,o.jsx)("div",{style:{padding:"10px",backgroundColor:e.includes("❌")?"#ffcccc":e.includes("✅")?"#ccffcc":"#e6f7ff",borderRadius:"4px",marginTop:"10px"},children:e}),!0===r&&(0,o.jsxs)("div",{style:{padding:"10px",backgroundColor:"#e6f7ff",borderRadius:"4px",marginTop:"10px"},children:["✅ Kolekcja teams jest zainicjalizowana. Aplikacja może korzystać z zespoł\xf3w.",p&&(0,o.jsxs)("div",{style:{fontSize:"0.8em",marginTop:"5px"},children:["Ostatnie sprawdzenie: ",p.toLocaleString()]})]}),!1===r&&(0,o.jsxs)("div",{style:{padding:"10px",backgroundColor:"#fff3cd",borderRadius:"4px",marginTop:"10px"},children:["⚠️ Kolekcja teams nie istnieje lub jest niekompletna. Należy ją zainicjalizować.",p&&(0,o.jsxs)("div",{style:{fontSize:"0.8em",marginTop:"5px"},children:["Ostatnie sprawdzenie: ",p.toLocaleString()]})]}),(0,o.jsxs)("div",{style:{marginTop:"15px",fontSize:"0.9em",color:"#666"},children:[(0,o.jsx)("p",{children:(0,o.jsx)("strong",{children:"Instrukcje:"})}),(0,o.jsxs)("ol",{style:{paddingLeft:"20px"},children:[(0,o.jsx)("li",{children:'Najpierw użyj przycisku "Sprawdź uprawnienia", aby zweryfikować czy masz dostęp do zapisu'}),(0,o.jsx)("li",{children:'Następnie "Sprawdź stan kolekcji", aby zobaczyć czy zespoły już istnieją'}),(0,o.jsx)("li",{children:'Jeśli kolekcja nie istnieje, użyj przycisku "Inicjalizuj kolekcję teams"'}),(0,o.jsx)("li",{children:'Przycisk "WYMUŚ inicjalizację kolekcji" używaj TYLKO w przypadku problem\xf3w z inicjalizacją standardową'})]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Uwaga:"})," Wszystkie operacje są logowane w konsoli przeglądarki (F12 → Console)"]})]})]})}},6104:(e,a,i)=>{i.d(a,{db:()=>t});var o=i(3915),n=i(5317),c=i(6203),s=i(858);let r=(0,o.Dk)().length>0?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyB6O68_OME3BE3kDEBTNbTcGCKDUrghuJ0",authDomain:"rakow-academy.firebaseapp.com",projectId:"rakow-academy",storageBucket:"rakow-academy.firebasestorage.app",messagingSenderId:"13314435269",appId:"1:13314435269:web:652465d1c608868dca28ac"}),t=(0,n.aU)(r),l=async()=>{try{await (0,n.Q5)(t),console.log("Persistencja dla wielu zakładek włączona pomyślnie")}catch(e){"failed-precondition"===e.code?console.warn("Persistencja offline nie może być włączona - aplikacja jest otwarta w wielu kartach."):"unimplemented"===e.code?console.warn("Persistencja offline nie jest dostępna w tej przeglądarce."):console.error("Błąd przy włączaniu persistencji offline:",e)}};setTimeout(()=>{l()},1e3),(0,c.xI)(r),(0,s.c7)(r)},9289:(e,a,i)=>{i.d(a,{Po:()=>t,TA:()=>s,sb:()=>r});var o=i(6104),n=i(5317),c=i(9671);let s=async()=>{try{console.log("Rozpoczynam inicjalizację kolekcji teams w Firebase...");let e=Object.values(c.T)[0].id,a=(0,n.H9)(o.db,"teams",e);if((await (0,n.x7)(a)).exists())return console.log("Dokument team o ID ".concat(e," już istnieje, pomijanie inicjalizacji.")),!1;console.log("Dokumenty teams nie istnieją, rozpoczynam tworzenie kolekcji...");let i=Object.values(c.T).map(async e=>{try{return console.log("Pr\xf3ba dodania zespołu: ".concat(e.name," (").concat(e.id,")")),await (0,n.BN)((0,n.H9)(o.db,"teams",e.id),{id:e.id,name:e.name,createdAt:new Date,isSystem:!0}),console.log("✅ Dodano zesp\xf3ł: ".concat(e.name," (").concat(e.id,")")),!0}catch(a){throw console.error("❌ Błąd dodawania zespołu ".concat(e.name,":"),a),a}});if(await Promise.all(i),await t())return console.log("✅ Pomyślnie zainicjalizowano kolekcję teams i zweryfikowano jej istnienie."),!0;return console.error("❌ Inicjalizacja zakończona, ale weryfikacja nie powiodła się. Kolekcja może być pusta."),!1}catch(e){return console.error("❌ Błąd podczas inicjalizacji kolekcji teams:",e),e instanceof Error&&console.error("Szczeg\xf3ły błędu:",{name:e.name,message:e.message,stack:e.stack}),!1}},r=async()=>{try{for(let e of(console.log("Wymuszam inicjalizację kolekcji teams..."),Object.values(c.T)))try{await (0,n.BN)((0,n.H9)(o.db,"teams",e.id),{id:e.id,name:e.name,createdAt:new Date,isSystem:!0,updatedAt:new Date},{merge:!0}),console.log("Zaktualizowano/dodano zesp\xf3ł: ".concat(e.name," (").concat(e.id,")"))}catch(a){console.error("Błąd przy wymuszonym dodawaniu zespołu ".concat(e.name,":"),a)}return await t()}catch(e){return console.error("Błąd podczas wymuszonej inicjalizacji kolekcji teams:",e),!1}},t=async()=>{try{console.log("Sprawdzanie kolekcji teams...");let e=Object.values(c.T).map(e=>e.id),a=0;for(let i of e){let e=(0,n.H9)(o.db,"teams",i);(await (0,n.x7)(e)).exists()?(console.log("✅ Zesp\xf3ł ".concat(i," istnieje w Firebase")),a++):console.log("❌ Zesp\xf3ł ".concat(i," NIE istnieje w Firebase"))}let i=a===e.length;return console.log("Znaleziono ".concat(a,"/").concat(e.length," zespoł\xf3w w Firebase. Wynik sprawdzenia: ").concat(i?"SUKCES":"NIEPOWODZENIE")),i}catch(e){return console.error("Błąd podczas sprawdzania kolekcji teams:",e),e instanceof Error&&console.error("Szczeg\xf3ły błędu:",{name:e.name,message:e.message,stack:e.stack}),!1}}},9671:(e,a,i)=>{i.d(a,{T:()=>o});let o=i(76).T3}}]);