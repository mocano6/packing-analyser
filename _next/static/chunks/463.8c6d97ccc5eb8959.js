(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{409:e=>{e.exports={pitchContainer:"FootballPitch_pitchContainer__hqvFg",pitch:"FootballPitch_pitch__bG5OZ",grid:"FootballPitch_grid__cCShI",zoneCell:"FootballPitch_zoneCell__o2_zw",firstSelection:"FootballPitch_firstSelection__j09nC",secondSelection:"FootballPitch_secondSelection__Hc9lk",selected:"FootballPitch_selected__Hiad0",xTValue:"FootballPitch_xTValue__cFfj3",pitchLines:"FootballPitch_pitchLines__UWyrF",centerLine:"FootballPitch_centerLine__RYF2r",centerCircle:"FootballPitch_centerCircle__asdNK",penaltyAreaLeft:"FootballPitch_penaltyAreaLeft__FS9nY",goalAreaLeft:"FootballPitch_goalAreaLeft__2hiHr",penaltyAreaRight:"FootballPitch_penaltyAreaRight__RVgZG",goalAreaRight:"FootballPitch_goalAreaRight__vu62C",actionText:"FootballPitch_actionText__RN4XO",pulseText:"FootballPitch_pulseText__d9Bcz"}},5463:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>A});var a=o(5155),n=o(2115),l=o(409),i=o.n(l),c=o(9729);let s=e=>{let t=(e-.00638303)/.25107059;if(t<.2);else if(t<.4)return"rgba(239, 140, 11, 0.63)";else if(t<.6)return"rgb(127, 90, 213, 0.6)";else if(t<.8)return"rgb(139, 37, 207)";else return"rgba(241, 58, 12, 0.8)"},r=(0,n.memo)(function(e){let{zoneIndex:t,xTValue:o,isSelected:l,isFirstSelection:c,isSecondSelection:r,onSelect:d}=e,_=(0,n.useMemo)(()=>o>=.1?"extreme":o>=.04?"veryhigh":o>=.02?"high":"",[o]);(0,n.useEffect)(()=>{(c||r)&&console.log("ZoneCell ".concat(t,": "),{isFirstSelection:c,isSecondSelection:r,xTValue:o.toFixed(3),label:c?"PASS":r?"RECEIVE":"NONE"})},[t,c,r,o]);let p="".concat(i().zoneCell," ").concat(c?i().firstSelection:r?i().secondSelection:l?i().selected:"");return(0,a.jsxs)("div",{className:p,onClick:()=>{console.log("Kliknięto strefę ".concat(t," z wartością xT: ").concat(o.toFixed(3))),d(t)},style:{backgroundColor:s(o)},role:"gridcell","aria-selected":l||c||r,tabIndex:0,"data-zone-index":t,"data-xt-value":_,"data-selection-type":c?"pass":r?"receive":"none",children:[!c&&!r&&(0,a.jsx)("span",{className:i().xTValue,children:o.toFixed(3)}),c&&(0,a.jsx)("span",{className:i().actionText,children:"PASS"}),r&&(0,a.jsx)("span",{className:i().actionText,children:"RECEIVE"})]})});r.displayName="ZoneCell";let d=(0,n.memo)(function(e){let{selectedZone:t,onZoneSelect:o,startZone:l,endZone:s}=e;(0,n.useEffect)(()=>{console.log("FootballPitch - zmiany stref:",{startZone:l,endZone:s,selectedZone:t})},[l,s,t]);let d=(0,n.useCallback)(e=>{let t=Math.floor(e/12),a=(0,c.pU)(t,e%12);console.log("FootballPitch - handleZoneClick: strefa ".concat(e,", xT: ").concat(a.toFixed(3))),o(e,a)},[o]),_=n.useMemo(()=>Array.from({length:96},(e,o)=>{let n=Math.floor(o/12),i=o%12,_=(0,c.pU)(n,i),p=t===o||t===o.toString();return(0,a.jsx)(r,{zoneIndex:o,xTValue:_,isSelected:p,isFirstSelection:l===o,isSecondSelection:s===o,onSelect:d},o)}),[t,l,s,d]);return(0,a.jsx)("div",{className:i().pitchContainer,children:(0,a.jsxs)("div",{className:i().pitch,role:"grid","aria-label":"Boisko piłkarskie podzielone na strefy",children:[(0,a.jsx)("div",{className:i().grid,children:_}),(0,a.jsxs)("div",{className:i().pitchLines,"aria-hidden":"true",children:[(0,a.jsx)("div",{className:i().centerLine}),(0,a.jsx)("div",{className:i().centerCircle}),(0,a.jsx)("div",{className:i().penaltyAreaLeft}),(0,a.jsx)("div",{className:i().goalAreaLeft}),(0,a.jsx)("div",{className:i().penaltyAreaRight}),(0,a.jsx)("div",{className:i().goalAreaRight})]})]})})});d.displayName="FootballPitch";var _=o(9101),p=o.n(_),u=o(7091),b=o.n(u);let m=(0,n.memo)(function(e){let{actionType:t,onActionTypeChange:o}=e,l=(0,n.useCallback)(()=>{o("pass")},[o]),i=(0,n.useCallback)(()=>{o("dribble")},[o]);return(0,a.jsxs)("div",{className:b().toggleContainer,role:"radiogroup","aria-label":"Typ akcji",children:[(0,a.jsx)("button",{className:"".concat(b().toggleButton," ").concat("pass"===t?b().active:""),onClick:l,"aria-pressed":"pass"===t,type:"button",children:"Podanie"}),(0,a.jsx)("button",{className:"".concat(b().toggleButton," ").concat("dribble"===t?b().active:""),onClick:i,"aria-pressed":"dribble"===t,type:"button",children:"Drybling"})]})});m.displayName="ActionTypeToggle";let y=[{points:1,label:"Minięty przeciwnik",description:"Dodaj punkt za minięcie obrońcy",type:"points"},{points:0,label:"Podanie do P3",description:"Aktywuj/Dezaktywuj",type:"toggle"}],g=(0,n.memo)(function(e){let{player:t,isSender:o,isReceiver:n,isDribbler:l=!1,onSelect:i}=e,c=!!t.imageUrl;return(0,a.jsxs)("div",{className:"".concat(p().playerTile," \n        ").concat(o?p().playerSenderTile:""," \n        ").concat(n?p().playerReceiverTile:""," \n        ").concat(l?p().playerDribblerTile:"","\n        ").concat(c?p().withImage:""),onClick:()=>i(t.id),role:"button",tabIndex:0,"aria-pressed":o||n||l,children:[c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t.imageUrl,alt:"",className:p().playerTileImage,onError:e=>{e.target.style.display="none"}}),(0,a.jsx)("div",{className:p().playerTileOverlay})]}),(0,a.jsxs)("div",{className:p().playerContent,children:[(0,a.jsx)("div",{className:p().number,children:t.number}),(0,a.jsxs)("div",{className:p().playerInfo,children:[(0,a.jsx)("div",{className:p().name,children:t.name}),(0,a.jsx)("div",{className:p().details,children:t.position&&(0,a.jsx)("span",{className:p().position,children:t.position})})]})]})]})}),h=e=>{let{isOpen:t,onClose:o,players:n,selectedPlayerId:l,selectedReceiverId:i,onSenderSelect:c,onReceiverSelect:s,actionMinute:r,onMinuteChange:d,actionType:_,onActionTypeChange:u,currentPoints:b,onAddPoints:h,isP3Active:j,onP3Toggle:x,isShot:f,onShotToggle:A,isGoal:k,onGoalToggle:v,isPenaltyAreaEntry:N,onPenaltyAreaEntryToggle:z,isSecondHalf:T,onSecondHalfToggle:S,onSaveAction:C,onReset:M}=e;if(!t)return null;let w=e=>{if("dribble"===_)e===l?c(null):c(e),i&&s(null);else{if(e===l){c(null);return}if(e===i){s(null);return}if(!l){c(e);return}if(l&&!i){s(e);return}c(e),s(null)}},B=e=>{h(e)},P=e=>{S(e),e&&r<46?d(46):!e&&r>65&&d(45),console.log("Zmieniono połowę na: ".concat(e?"P2":"P1"))},F=async()=>{if(!l){alert("Wybierz zawodnika rozpoczynającego akcję!");return}if("pass"===_&&!i){alert("Wybierz zawodnika kończącego podanie!");return}let e=localStorage.getItem("tempStartZone"),t=localStorage.getItem("tempEndZone");if(console.log("ActionModal: Wartości stref z localStorage:",{tempStartZone:e,tempEndZone:t}),!e||!t){console.error("ActionModal: Brak informacji o strefach w localStorage!"),alert("Błąd: Brak informacji o wybranych strefach. Proszę wybrać strefy początkową i końcową na boisku.");return}console.log("ActionModal: Zapisuję akcję, stan przed zapisem:",{selectedPlayerId:l,selectedReceiverId:i,actionType:_,actionMinute:r,currentPoints:b,isP3Active:j,isShot:f,isGoal:k,isPenaltyAreaEntry:N,strefy:{startZone:e?Number(e):null,endZone:t?Number(t):null}}),C()},I=()=>{M(),o()};return(0,a.jsx)("div",{className:p().modalOverlay,onClick:I,children:(0,a.jsxs)("div",{className:p().modalContent,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{children:"Dodaj akcję"}),(0,a.jsxs)("div",{className:p().form,children:[(0,a.jsx)("div",{className:p().formGroup,children:(0,a.jsxs)("div",{className:p().togglesRow,children:[(0,a.jsxs)("div",{className:p().toggleGroup,children:[(0,a.jsx)("label",{children:"Typ akcji:"}),(0,a.jsx)(m,{actionType:_,onActionTypeChange:e=>{u(e),"dribble"===e&&i&&s(null)}})]}),(0,a.jsxs)("div",{className:p().toggleGroup,children:[(0,a.jsx)("label",{children:"Połowa:"}),(0,a.jsxs)("div",{className:p().halfToggle,children:[(0,a.jsx)("button",{className:"".concat(p().halfButton," ").concat(T?"":p().activeHalf),onClick:()=>P(!1),children:"P1"}),(0,a.jsx)("button",{className:"".concat(p().halfButton," ").concat(T?p().activeHalf:""),onClick:()=>P(!0),children:"P2"})]})]})]})}),(0,a.jsxs)("div",{className:p().formGroup,children:[(0,a.jsx)("label",{className:p().playerTitle,children:"dribble"===_?"Wybierz zawodnika dryblującego:":"Wybierz zawodnik\xf3w:"}),(0,a.jsx)("div",{className:p().playerSelectionInfo,children:"pass"===_?(0,a.jsx)("p",{children:"Kliknij, aby wybrać zawodnika rozpoczynającego, a następnie kliknij na innego zawodnika, aby wybrać kończącego."}):(0,a.jsx)("p",{children:"Kliknij, aby wybrać zawodnika wykonującego drybling."})}),(0,a.jsx)("div",{className:p().playersGrid,children:n.map(e=>(0,a.jsx)(g,{player:e,isSender:"pass"===_&&e.id===l,isReceiver:"pass"===_&&e.id===i,isDribbler:"dribble"===_&&e.id===l,onSelect:w},e.id))})]}),(0,a.jsxs)("div",{className:p().buttonsGrid,children:[y.map((e,t)=>"toggle"===e.type?(0,a.jsxs)("button",{className:"".concat(p().actionButton," ").concat(j?p().activeButton:""),onClick:x,title:e.description,"aria-pressed":j,type:"button",children:[(0,a.jsx)("span",{className:p().buttonLabel,children:e.label}),(0,a.jsx)("span",{className:p().buttonDescription,children:e.description})]},t):(0,a.jsxs)("button",{className:p().actionButton,onClick:()=>B(e.points),title:e.description,type:"button",children:[(0,a.jsxs)("span",{className:p().buttonLabel,children:[e.label,": ",(0,a.jsx)("b",{children:b})]}),(0,a.jsx)("span",{className:p().buttonDescription,children:e.description})]},t)),(0,a.jsxs)("button",{className:"".concat(p().actionButton," ").concat(N?p().activeButton:""),onClick:()=>{z(!N)},"aria-pressed":N,type:"button",children:[(0,a.jsx)("span",{className:p().buttonLabel,children:"Wejście w PK"}),(0,a.jsx)("span",{className:p().buttonDescription,children:"Zaznacz jeśli akcja zakończyła się wejściem w pole karne"})]}),(0,a.jsxs)("button",{className:"".concat(p().actionButton," ").concat(f?p().activeButton:""),onClick:()=>{A(!f)},"aria-pressed":f,type:"button",children:[(0,a.jsx)("span",{className:p().buttonLabel,children:"Strzał"}),(0,a.jsx)("span",{className:p().buttonDescription,children:"Zaznacz jeśli akcja zakończyła się strzałem"})]}),(0,a.jsxs)("button",{className:"".concat(p().actionButton," ").concat(k?p().activeButton:""),onClick:()=>{v(!k)},disabled:!f,"aria-pressed":k,"aria-disabled":!f,type:"button",style:{opacity:f?1:.5,cursor:f?"pointer":"not-allowed"},children:[(0,a.jsx)("span",{className:p().buttonLabel,children:"Bramka"}),(0,a.jsx)("span",{className:p().buttonDescription,children:"Zaznacz jeśli strzał zakończył się bramką"})]})]}),(0,a.jsxs)("div",{className:p().controlButtons,children:[(0,a.jsx)("button",{className:"".concat(p().controlButton," ").concat(p().resetButton),onClick:I,type:"button",children:"Anuluj"}),(0,a.jsx)("button",{className:"".concat(p().controlButton," ").concat(p().clearButton),onClick:()=>{M(),d(r),S(T),console.log("Reset formularza akcji - zachowano wartości stref i zaznaczonych zawodnik\xf3w")},type:"button",children:"⌫ Resetuj"}),(0,a.jsxs)("div",{className:p().minuteInput,children:[(0,a.jsx)("label",{htmlFor:"action-minute-modal",children:"Minuta:"}),(0,a.jsx)("input",{id:"action-minute-modal",type:"number",value:r,onChange:e=>{d(parseInt(e.target.value)||0)},min:T?46:1,max:T?130:65})]}),(0,a.jsx)("button",{className:"".concat(p().controlButton," ").concat(p().saveButton),onClick:F,type:"button",children:"Zapisz akcję"})]})]})]})})};var j=o(9089),x=o.n(j);let f=(0,n.memo)(function(e){let{selectedZone:t,handleZoneSelect:o,players:l,selectedPlayerId:i,setSelectedPlayerId:c,selectedReceiverId:s,setSelectedReceiverId:r,actionMinute:_,setActionMinute:p,actionType:u,setActionType:b,currentPoints:m,setCurrentPoints:y,isP3Active:g,setIsP3Active:j,isShot:f,setIsShot:A,isGoal:k,setIsGoal:v,isPenaltyAreaEntry:N,setIsPenaltyAreaEntry:z,isSecondHalf:T,setIsSecondHalf:S,handleSaveAction:C,resetActionState:M,startZone:w,endZone:B,isActionModalOpen:P,setIsActionModalOpen:F}=e;return(0,n.useEffect)(()=>{P&&console.log("ActionSection: Modal otwarty, aktualne strefy:",{startZone:w,endZone:B})},[P,w,B]),(0,a.jsxs)("section",{className:x().actionContainer,children:[(0,a.jsx)(d,{selectedZone:t,onZoneSelect:(e,t,a,n)=>{if(null!==e){console.log("ActionSection: handlePitchZoneSelect wywołane z:",{zone:e,xT:t});let l=o(e,t,a,n);return setTimeout(()=>{null===w||null===B||P||console.log("ActionSection: Wykryto obie strefy ustawione, można otworzyć ActionModal",{startZone:w,endZone:B})},100),l}},startZone:w,endZone:B}),(0,a.jsx)(h,{isOpen:P,onClose:()=>{console.log("ActionSection: Zamykanie modalu akcji"),F(!1),M()},players:l,selectedPlayerId:i,selectedReceiverId:s,onSenderSelect:c,onReceiverSelect:r,actionMinute:_,onMinuteChange:p,actionType:u,onActionTypeChange:b,currentPoints:m,onAddPoints:e=>{y(t=>t+e)},isP3Active:g,onP3Toggle:()=>{j(e=>!e)},isShot:f,onShotToggle:A,isGoal:k,onGoalToggle:v,isPenaltyAreaEntry:N,onPenaltyAreaEntryToggle:z,isSecondHalf:T,onSecondHalfToggle:e=>{console.log("ActionSection - zmiana połowy na:",e?"P2":"P1","poprzednia wartość:",T),localStorage.setItem("currentHalf",e?"P2":"P1"),S(e),setTimeout(()=>{console.log("ActionSection - po zmianie, wartość w localStorage:",localStorage.getItem("currentHalf"))},50)},onSaveAction:()=>{if(console.log("ActionSection: handleSaveActionWrapper wywołane, wartości stref:",{startZone:w,endZone:B}),null==w){console.error("ActionSection: Brak strefy początkowej - nie można zapisać akcji"),alert("Wybierz strefę początkową akcji!");return}if(null==B){console.error("ActionSection: Brak strefy końcowej - nie można zapisać akcji"),alert("Wybierz strefę końcową akcji!");return}C()},onReset:M})]})});f.displayName="ActionSection";let A=f},7091:e=>{e.exports={toggleContainer:"ActionTypeToggle_toggleContainer__qcq2I",toggleButton:"ActionTypeToggle_toggleButton__DjkpF",active:"ActionTypeToggle_active__diTGF"}},9089:e=>{e.exports={actionContainer:"ActionSection_actionContainer__l4X6e",pitchContainer:"ActionSection_pitchContainer__JeR_9",rightContainer:"ActionSection_rightContainer__vQ_m8"}},9101:e=>{e.exports={modalOverlay:"ActionModal_modalOverlay__rN8LI",modalContent:"ActionModal_modalContent__vnRas",form:"ActionModal_form__u4rwj",formGroup:"ActionModal_formGroup__8KI2b",input:"ActionModal_input__tcxei",select:"ActionModal_select__DQqyQ",selectedPlayer:"ActionModal_selectedPlayer__sL7Lf",pointsDisplay:"ActionModal_pointsDisplay__ZV6dV",pointsLabel:"ActionModal_pointsLabel__c3thF",pointsValue:"ActionModal_pointsValue___J6SZ",buttonsGrid:"ActionModal_buttonsGrid__SiwiY",actionButton:"ActionModal_actionButton__G0I__",activeButton:"ActionModal_activeButton__0uSFa",buttonLabel:"ActionModal_buttonLabel__w30Hn",buttonDescription:"ActionModal_buttonDescription__cZpmw",points:"ActionModal_points__yXeni",controlButtons:"ActionModal_controlButtons__RVWYa",controlButton:"ActionModal_controlButton__JZrNR",clearButton:"ActionModal_clearButton__XjokD",resetButton:"ActionModal_resetButton__jySjX",saveButton:"ActionModal_saveButton__uXgZQ",minuteInput:"ActionModal_minuteInput__t8C49",playersGrid:"ActionModal_playersGrid__EXHGD",playerTile:"ActionModal_playerTile__Dwnf3",playerSenderTile:"ActionModal_playerSenderTile__a7BTo",playerReceiverTile:"ActionModal_playerReceiverTile__ihfIG",playerDribblerTile:"ActionModal_playerDribblerTile__QsInA",withImage:"ActionModal_withImage__6N3Dt",playerTileImage:"ActionModal_playerTileImage__qHZtV",playerTileOverlay:"ActionModal_playerTileOverlay__jO_Fk",playerContent:"ActionModal_playerContent__qrNUR",number:"ActionModal_number__fL6cC",playerInfo:"ActionModal_playerInfo__0bOWI",name:"ActionModal_name__FojhX",details:"ActionModal_details__fV7tz",position:"ActionModal_position__8ZiVr",playerTitle:"ActionModal_playerTitle__4gSJH",playerSelectionInfo:"ActionModal_playerSelectionInfo__C0VlH",togglesRow:"ActionModal_togglesRow__fJvOv",toggleGroup:"ActionModal_toggleGroup__qWHtP",toggleLabel:"ActionModal_toggleLabel__2ADzy",halfToggle:"ActionModal_halfToggle__9kXnp",typeToggle:"ActionModal_typeToggle__3Hl3Y",halfButton:"ActionModal_halfButton__WQO9N",typeButton:"ActionModal_typeButton__tj3di",activeHalf:"ActionModal_activeHalf__BVEVM",activeType:"ActionModal_activeType__9w7T3",passButton:"ActionModal_passButton__uevHc",dribbleButton:"ActionModal_dribbleButton__OZkff"}}}]);